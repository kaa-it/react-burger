(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{118:function(e,t,n){e.exports={home:"home_home__1AMrN"}},119:function(e,t,n){e.exports={content:"ingredients-group_content__2g0n_"}},121:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__y6RBt"}},17:function(e,t,n){e.exports={order_info:"order-info_order_info__L1D41",container:"order-info_container__1pNnv",number:"order-info_number__3cqwd text text_type_digits-default",title:"order-info_title__3scK3 text_type_main-medium mt-10 mb-3",status:"order-info_status__231JW text text_type_main-default",status_success:"order-info_status_success__OT1tn order-info_status__231JW text text_type_main-default",ingredients_title:"order-info_ingredients_title__2pQO6 text_type_main-medium mt-15",ingredients:"order-info_ingredients__1xUCP",footer:"order-info_footer__18mVw",price:"order-info_price__c1MSY"}},203:function(e,t,n){"use strict";n.r(t);var r,a=n(1),s=n.n(a),c=n(38),i=n.n(c),o=n(6),d=n(10),u=n(89),l=n.n(u),m=n(83),j=(n(69),n(25)),_=n.n(j),b=n(84),p=n(85),f=n(86),h=n(0),x=function(){return Object(h.jsx)("header",{className:_.a.header,children:Object(h.jsxs)("div",{className:_.a.header_content,children:[Object(h.jsxs)("nav",{className:_.a.left_menu,children:[Object(h.jsxs)(o.c,{to:"/react-burger",exact:!0,className:_.a.menu_item,activeClassName:_.a.active_menu_item,children:[Object(h.jsx)(b.BurgerIcon,{type:"primary"}),Object(h.jsx)("p",{className:"pl-2",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(h.jsxs)(o.c,{to:"/react-burger/feed",exact:!0,className:_.a.menu_item,activeClassName:_.a.active_menu_item,children:[Object(h.jsx)(p.ListIcon,{type:"secondary"}),Object(h.jsx)("p",{className:"pl-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(h.jsx)(o.b,{to:"/react-burger",className:_.a.logo,children:Object(h.jsx)(m.Logo,{})}),Object(h.jsx)("nav",{className:_.a.right_menu,children:Object(h.jsxs)(o.c,{to:"/react-burger/profile",className:_.a.menu_item,activeClassName:_.a.active_menu_item,children:[Object(h.jsx)(f.ProfileIcon,{type:"secondary"}),Object(h.jsx)("p",{className:"pl-2",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})},g=n(22),O=n(3),v=n(13),y=n(61),N=n.n(y),k=n(8),w=n(5),C=n.n(w),T=n(14),S=n(4),E="https://norma.nomoreparties.space/api",I=function(){var e=Object(T.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(T.a)(C.a.mark((function e(t,n){var r,a,s,c,i,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,n);case 2:if(!(r=e.sent).ok){e.next=7;break}return e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:return e.next=9,r.json();case 9:if("jwt expired"!==(a=e.sent).message){e.next=31;break}return e.next=13,I();case 13:return s=e.sent,e.next=16,s.json();case 16:if((c=e.sent).success){e.next=19;break}return e.abrupt("return",c);case 19:return localStorage.setItem("accessToken",c.accessToken),localStorage.setItem("refreshToken",c.refreshToken),(i=n||{method:"GET",headers:{}}).headers=Object(O.a)(Object(O.a)({},i.headers),{},{Authorization:c.accessToken}),e.next=25,fetch(t,i);case 25:return o=e.sent,e.next=28,o.json();case 28:return e.abrupt("return",e.sent);case 31:return e.abrupt("return",a);case 32:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=Object(S.c)("auth/login",function(){var e=Object(T.a)(C.a.mark((function e(t,n){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).success){e.next=12;break}return localStorage.setItem("accessToken",a.accessToken),localStorage.setItem("refreshToken",a.refreshToken),e.abrupt("return",{user:a.user,accessToken:a.accessToken,refreshToken:a.refreshToken});case 12:return e.abrupt("return",n.rejectWithValue(""));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),P=Object(S.c)("auth/register",function(){var e=Object(T.a)(C.a.mark((function e(t,n){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).success){e.next=12;break}return localStorage.setItem("accessToken",a.accessToken),localStorage.setItem("refreshToken",a.refreshToken),e.abrupt("return",{user:a.user,accessToken:a.accessToken,refreshToken:a.refreshToken});case 12:return e.abrupt("return",n.rejectWithValue(""));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),D=Object(S.c)("auth/forgot-password",function(){var e=Object(T.a)(C.a.mark((function e(t,n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:t})});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!e.sent.success){e.next=10;break}return e.abrupt("return");case 10:return e.abrupt("return",n.rejectWithValue(""));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),B=Object(S.c)("auth/reset-password",function(){var e=Object(T.a)(C.a.mark((function e(t,n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!e.sent.success){e.next=10;break}return e.abrupt("return");case 10:return e.abrupt("return",n.rejectWithValue(""));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),W=Object(S.c)("auth/get-user",function(){var e=Object(T.a)(C.a.mark((function e(t,n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("".concat(E,"/auth/user"),{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:localStorage.getItem("accessToken")}});case 2:if(!(r=e.sent).success){e.next=7;break}return e.abrupt("return",r.user);case 7:return e.abrupt("return",n.rejectWithValue(""));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),M=Object(S.c)("auth/update-user",function(){var e=Object(T.a)(C.a.mark((function e(t,n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("".concat(E,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:localStorage.getItem("accessToken")},body:JSON.stringify(t)});case 2:if(!(r=e.sent).success){e.next=7;break}return e.abrupt("return",r.user);case 7:return e.abrupt("return",n.rejectWithValue(""));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),A=Object(S.c)("auth/logout",function(){var e=Object(T.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("".concat(E,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:localStorage.getItem("accessToken")},body:JSON.stringify({token:localStorage.getItem("refreshToken")})});case 2:if(!e.sent.success){e.next=7;break}return e.abrupt("return");case 7:return e.abrupt("return",n.rejectWithValue(""));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),V={accessToken:localStorage.getItem("accessToken"),refreshToken:localStorage.getItem("refreshToken"),user:null,isResetPassword:!1,isPasswordWasReset:!1,isLoading:!1,hasError:!1,isShown:!1,isLoggedIn:!1,isFetchedUser:!1,isLoggedOut:!1},z=Object(S.e)({name:"auth",initialState:V,reducers:{clearPasswordReset:function(e){e.isPasswordWasReset=!1}},extraReducers:function(e){e.addCase(R.pending,(function(e){e.isLoading=!0,e.hasError=!1,e.isLoggedIn=!1,e.user=null})).addCase(R.fulfilled,(function(e,t){e.isLoading=!1,e.hasError=!1,e.user=t.payload.user,e.accessToken=t.payload.accessToken,e.refreshToken=t.payload.refreshToken,e.isLoggedIn=!0,e.isLoggedOut=!1})).addCase(R.rejected,(function(e){e.isLoading=!1,e.hasError=!0,e.user=null,e.isLoggedIn=!1})).addCase(P.pending,(function(e){e.isLoading=!0,e.hasError=!1,e.user=null})).addCase(P.fulfilled,(function(e,t){e.isLoading=!1,e.hasError=!1,e.user=t.payload.user,e.isLoggedIn=!0,e.isLoggedOut=!1,e.accessToken=t.payload.accessToken,e.refreshToken=t.payload.refreshToken})).addCase(P.rejected,(function(e){e.isLoading=!1,e.hasError=!0,e.user=null})).addCase(D.pending,(function(e){e.isLoading=!0,e.hasError=!1,e.isResetPassword=!1})).addCase(D.fulfilled,(function(e){e.isLoading=!1,e.hasError=!1,e.isResetPassword=!0})).addCase(D.rejected,(function(e){e.isLoading=!1,e.hasError=!0,e.isResetPassword=!1})).addCase(B.pending,(function(e){e.isLoading=!0,e.hasError=!1,e.isResetPassword=!0,e.isPasswordWasReset=!1})).addCase(B.fulfilled,(function(e){e.isLoading=!1,e.hasError=!1,e.isResetPassword=!1,e.isPasswordWasReset=!0})).addCase(B.rejected,(function(e){e.isLoading=!1,e.hasError=!0,e.isResetPassword=!0,e.isPasswordWasReset=!1})).addCase(W.pending,(function(e){e.isLoading=!0,e.hasError=!1})).addCase(W.fulfilled,(function(e,t){e.isLoading=!1,e.hasError=!1,e.user=t.payload})).addCase(W.rejected,(function(e){e.isLoading=!1,e.hasError=!0})).addCase(M.pending,(function(e){e.isLoading=!0,e.hasError=!1})).addCase(M.fulfilled,(function(e,t){e.isLoading=!1,e.hasError=!1,e.user=t.payload})).addCase(M.rejected,(function(e){e.isLoading=!1,e.hasError=!0})).addCase(A.pending,(function(e){e.isLoading=!0,e.hasError=!1,e.isLoggedOut=!1})).addCase(A.fulfilled,(function(e){e.isLoading=!1,e.hasError=!1,e.isLoggedOut=!0,e.isLoggedIn=!1,e.accessToken="",e.refreshToken="",e.user=null,localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")})).addCase(A.rejected,(function(e){e.isLoading=!1,e.hasError=!0,e.isLoggedOut=!1}))}}),J=z.actions.clearPasswordReset,F=z.reducer,G=Object(S.c)("ingredients/fetchAll",Object(T.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/ingredients"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})))),U={ingredients:[],ingredientsMap:new Map,isLoading:!1,hasError:!1,currentTab:"bun"},H=Object(S.e)({name:"ingredients",initialState:U,reducers:{switchTab:function(e,t){e.currentTab=t.payload}},extraReducers:function(e){e.addCase(G.pending,(function(e){e.isLoading=!0,e.hasError=!1,e.ingredients=[]})).addCase(G.fulfilled,(function(e,t){e.isLoading=!1,e.hasError=!1,e.ingredients=t.payload,e.ingredients.forEach((function(t){e.ingredientsMap.set(t._id,t)}))})).addCase(G.rejected,(function(e){e.isLoading=!1,e.hasError=!0,e.ingredients=[]}))}}),Q=H.actions.switchTab,q=H.reducer,K=Object(S.e)({name:"constructor",initialState:{bun:null,ingredients:[]},reducers:{setBun:function(e,t){e.bun=t.payload},addIngredient:function(e,t){e.ingredients.push(t.payload)},removeIngredient:function(e,t){e.ingredients=e.ingredients.filter((function(e){return e.key!==t.payload.key}))},moveIngredient:function(e,t){e.ingredients.splice(t.payload.toIndex,0,e.ingredients.splice(t.payload.fromIndex,1)[0])},clearConstructor:function(e){e.ingredients=[],e.bun=null}}}),Y=K.actions,X=Y.setBun,Z=Y.addIngredient,$=Y.removeIngredient,ee=Y.moveIngredient,te=Y.clearConstructor,ne=K.reducer,re=Object(S.c)("order/postCreate",function(){var e=Object(T.a)(C.a.mark((function e(t,n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("".concat(E,"/orders"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("accessToken")},body:JSON.stringify(t)});case 2:if(!(r=e.sent).success){e.next=8;break}return n.dispatch(te()),e.abrupt("return",{name:r.name,number:r.order.number});case 8:return e.abrupt("return",n.rejectWithValue(""));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ae=Object(S.e)({name:"order",initialState:{name:"",number:0,isLoading:!1,hasError:!1,isShown:!1},reducers:{showOrderDetails:function(e){e.isShown=!0},closeOrderDetails:function(e){e.isShown=!1,e.name="",e.number=0}},extraReducers:function(e){e.addCase(re.pending,(function(e){e.isLoading=!0,e.hasError=!1,e.name="",e.number=0})).addCase(re.fulfilled,(function(e,t){e.isLoading=!1,e.hasError=!1,e.name=t.payload.name,e.number=t.payload.number})).addCase(re.rejected,(function(e){e.isLoading=!1,e.hasError=!0,e.name="",e.number=0}))}}),se=ae.actions,ce=se.showOrderDetails,ie=se.closeOrderDetails,oe=ae.reducer,de=n(24),ue=n(51),le=Object(S.b)("ORDERS_CONNECT"),me=Object(S.b)("ORDERS_DISCONNECT"),je=Object(S.b)("ORDERS_WS_OPEN"),_e=Object(S.b)("ORDERS_WS_CLOSE"),be=Object(S.b)("ORDERS_WS_MESSAGE"),pe=Object(S.b)("ORDERS_WS_ERROR"),fe=Object(S.c)("orders/getOrder",function(){var e=Object(T.a)(C.a.mark((function e(t,n){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/orders/").concat(t));case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,e.abrupt("return",a.orders);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),he=Object(S.d)({orders:null,connectionError:""},(function(e){e.addCase(je,(function(e){return e})).addCase(_e,(function(e){e.orders=null,e.connectionError=""})).addCase(pe,(function(e,t){e.connectionError=t.payload})).addCase(be,(function(e,t){e.orders=t.payload})).addCase(fe.fulfilled,(function(e,t){e.orders={orders:t.payload,total:1,totalToday:1}}))})),xe=n(60),ge=Object(de.b)({ingredients:q,burgerConstructor:ne,orderDetails:oe,auth:F,orders:he}),Oe=(r={wsConnect:le,wsDisconnect:me,onClose:_e,onOpen:je,onError:pe,onMessage:be},function(e){var t=null;return function(n){return function(a){var s=e.dispatch,c=a.payload,i=r.wsConnect,o=r.wsDisconnect,d=r.wsSendMessage,u=r.onOpen,l=r.onClose,m=r.onError,j=r.onMessage;i.match(a)&&(t=new WebSocket(c)),t&&(t.onopen=function(e){s(u())},t.onerror=function(e){s(m("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0435\u0431-\u0441\u043e\u043a\u0435\u0442\u0430"))},t.onmessage=function(e){var t=e.data,n=JSON.parse(t),r=(n.success,Object(xe.a)(n,["success"]));s(j(r))},t.onclose=function(e){s(l())},d&&d.match(a)&&t.send(JSON.stringify(c)),o.match(a)&&t.close()),n(a)}}}),ve=Object(S.a)({reducer:ge,middleware:function(e){return e({serializableCheck:!1}).concat(Oe)}}),ye=function(){return Object(ue.b)()},Ne=ue.c,ke=ve,we=function(){var e=Ne((function(e){return e.auth})),t=e.accessToken,n=e.isResetPassword,r=ye(),s=Object(d.h)().state,c=Object(a.useState)({email:""}),i=Object(v.a)(c,2),u=i[0],l=i[1],m=Object(a.useCallback)((function(e){e.preventDefault(),r(D(u.email))}),[u]);return t?(console.log("fp rd home"),Object(h.jsx)(d.a,{to:"/"})):n?Object(h.jsx)(d.a,{to:{pathname:"/reset-password",state:s?{from:s.from}:{}}}):Object(h.jsxs)("form",{className:N.a.forgot_password,onSubmit:m,children:[Object(h.jsx)("span",{className:"text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(h.jsx)(k.EmailInput,{onChange:function(e){l(Object(O.a)(Object(O.a)({},u),{},Object(g.a)({},e.target.name,e.target.value)))},value:u.email,name:"email"}),Object(h.jsx)(k.Button,{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(h.jsxs)("div",{className:"".concat(N.a.line," mt-9"),children:[Object(h.jsx)("span",{className:"text_type_main-default text_color_inactive mr-2",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(h.jsx)(o.b,{to:{pathname:"/login",state:s?{from:s.from}:{}},className:N.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Ce=n(118),Te=n.n(Ce),Se=n(39),Ee=n.n(Se),Ie=n(48),Le=n(119),Re=n.n(Le),Pe=n(40),De=n.n(Pe),Be=n(88),We=n(26),Me=n(209),Ae=function(e){var t=e.item,n=e.showDetails,r=e.count,a=Object(Me.a)({type:t.type,item:t,collect:function(e){return{opacity:e.isDragging()?.4:1}}}),s=Object(v.a)(a,2),c=s[0].opacity,i=s[1];return Object(h.jsxs)("div",{className:De.a.ingredient_item,"data-test":t.name,ref:i,style:{opacity:c},children:[Object(h.jsxs)("div",{className:De.a.content,onClick:function(){n(t)},children:[Object(h.jsx)("img",{alt:"\u041d\u0435\u0442 \u0444\u043e\u0442\u043e",src:t.image,className:De.a.illustration}),Object(h.jsxs)("p",{className:De.a.price,children:[t.price,Object(h.jsx)(We.CurrencyIcon,{type:"primary"})]}),Object(h.jsx)("p",{className:De.a.ingredient_item_text,children:t.name})]}),r>0&&Object(h.jsx)(Be.Counter,{size:"default",count:r})]})},Ve=function(e){var t=e.name,n=e.showDetails,r=e.ingredients,s=Ne((function(e){return e.burgerConstructor})),c=s.bun,i=s.ingredients,o=Object(a.useMemo)((function(){var e=new Map;if(0===r.length)return e;var t=r[0].type;return"bun"===t?(r.map((function(t){return e.set(t._id,c&&c._id===t._id?2:0)})),e):i.filter((function(e){return e.type===t})).reduce((function(e,t){return e.set(t._id,(e.get(t._id)||0)+1)}),e)}),[r,i,c]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{className:"text text_type_main-medium mb-6",children:t}),Object(h.jsx)("div",{"data-test":t,className:Re.a.content,children:r.map((function(e){return Object(h.jsx)(Ae,{item:e,count:o.get(e._id)||0,showDetails:n},e._id)}))})]})},ze=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useRef)(null),r=Object(a.useRef)(null),s=ye(),c=Object(d.g)(),i=Ne((function(e){return e.ingredients})),o=i.ingredients,u=i.currentTab,l=function(r){var a,c,i;switch(s(Q(r)),r){case"bun":null===(a=e.current)||void 0===a||a.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"});break;case"sauce":null===(c=t.current)||void 0===c||c.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"});break;case"main":null===(i=n.current)||void 0===i||i.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}},m=Object(a.useCallback)((function(e){c.push({pathname:"/ingredients/".concat(e._id),state:{modal:!0}})}),[]);return Object(h.jsxs)("div",{className:"".concat(Ee.a.burger_ingredients," pt-10"),children:[Object(h.jsx)("p",{"data-test":"ingredients_catalog_title",className:Ee.a.title,children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(h.jsxs)("div",{className:Ee.a.tabs,ref:r,children:[Object(h.jsx)(Ie.Tab,{value:"bun",active:"bun"===u,onClick:l,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(h.jsx)(Ie.Tab,{value:"sauce",active:"sauce"===u,onClick:l,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(h.jsx)(Ie.Tab,{value:"main",active:"main"===u,onClick:l,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(h.jsx)("div",{className:Ee.a.ingredients,children:Object(h.jsxs)("ul",{className:"".concat(Ee.a.group_list," custom-scroll"),onScroll:function(){var a,c,i,o,d=null===(a=r.current)||void 0===a?void 0:a.getBoundingClientRect().bottom,l=null===(c=e.current)||void 0===c?void 0:c.getBoundingClientRect().top,m=null===(i=t.current)||void 0===i?void 0:i.getBoundingClientRect().top,j=null===(o=n.current)||void 0===o?void 0:o.getBoundingClientRect().top;if(d&&l&&m&&j){var _=Math.abs(l-d),b=Math.abs(m-d),p=Math.abs(j-d),f=Math.min(_,b,p),h=f===_?"bun":f===b?"sauce":"main";h!==u&&s(Q(h))}},children:[Object(h.jsx)("li",{ref:e,children:Object(h.jsx)(Ve,{name:"\u0411\u0443\u043b\u043a\u0438",ingredients:o.filter((function(e){return"bun"===e.type})),showDetails:m})}),Object(h.jsx)("li",{ref:t,children:Object(h.jsx)(Ve,{name:"\u0421\u043e\u0443\u0441\u044b",ingredients:o.filter((function(e){return"sauce"===e.type})),showDetails:m})}),Object(h.jsx)("li",{ref:n,children:Object(h.jsx)(Ve,{name:"\u041d\u0430\u0447\u0438\u043d\u043a\u0430",ingredients:o.filter((function(e){return"main"===e.type})),showDetails:m})})]})})]})},Je=n(27),Fe=n.n(Je),Ge=n(121),Ue=n.n(Ge),He=function(e){var t=e.onClose,n=e.children;return Object(h.jsx)("div",{onClick:function(e){e.target===e.currentTarget&&t()},className:Ue.a.overlay,children:n})},Qe=n(62),qe=n.n(Qe),Ke=document.getElementById("react-modals"),Ye=function(e){var t=e.title,n=e.onClose,r=e.children;return Object(a.useEffect)((function(){var e=function(e){"Escape"===e.code&&n()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),i.a.createPortal(Object(h.jsx)(He,{onClose:n,children:Object(h.jsxs)("div",{className:qe.a.modal,children:[Object(h.jsxs)("div",{"data-test":"header",className:t?qe.a.header_with_title:qe.a.header_without_title,children:[t&&Object(h.jsx)("p",{"data-test":"header_title",className:"text text_type_main-large",children:t}),Object(h.jsx)(k.CloseIcon,{onClick:n,type:"primary"})]}),r]})}),Ke)},Xe=n(124),Ze=n(92),$e=n.n(Ze),et=n.p+"static/media/done.b600a79b.png",tt=function(){var e=Ne((function(e){return e.burgerConstructor})),t=e.bun,n=e.ingredients,r=Ne((function(e){return e.orderDetails})),s=r.name,c=r.number,i=r.isLoading,o=r.hasError,d=ye();return Object(a.useEffect)((function(){var e=n.map((function(e){return e._id})),r={ingredients:[t._id].concat(Object(Xe.a)(e),[t._id])};d(re(r))}),[]),Object(h.jsxs)("div",{className:$e.a.order_details,children:[i&&Object(h.jsx)("p",{className:"text text_type_main-medium",children:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430..."}),o&&Object(h.jsx)("p",{className:"text text_type_main-medium",children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),!i&&!o&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{"data-test":"order_number",className:"text text_type_digits-large mb-8",style:{textShadow:"0px 4px 32px #3333FF"},children:c}),Object(h.jsx)("p",{"data-test":"order_name",className:"text_type_main-medium mb-15",children:s}),Object(h.jsx)("img",{className:$e.a.image,alt:"\u041f\u0440\u0438\u043d\u044f\u0442",src:et}),Object(h.jsx)("p",{className:"text_type_main-default mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(h.jsx)("p",{className:"text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})]})},nt=n(87),rt=n(210),at=function(e){var t=e.item,n=e.type,r=e.index,s=e.onRemove,c=e.moveItem,i=void 0!==n,o="";"top"===n?o=" (\u0432\u0435\u0440\u0445)":"bottom"===n&&(o=" (\u043d\u0438\u0437)");var d=t.name+o,u=Object(a.useRef)(null),l=Object(Me.a)({type:t.type,item:Object(O.a)(Object(O.a)({},t),{},{index:r||-1}),collect:function(e){return{opacity:e.isDragging()?.4:1}}}),m=Object(v.a)(l,2),j=m[0].opacity,_=m[1],b=Object(rt.a)({accept:["sauce","main"],collect:function(e){return{handlerId:e.getHandlerId()}},canDrop:function(e){return void 0===n},hover:function(e,t){if(u.current&&void 0!==e.index&&c){var n=e.index,a=r;if(n!==a){var s=u.current.getBoundingClientRect(),i=(s.bottom-s.top)/2,o=t.getClientOffset().y-s.top;n<a&&o<i||n>a&&o>i||(c(n,a),e.index=a)}}}}),p=Object(v.a)(b,2),f=p[0].handlerId,x=p[1];return void 0===n&&_(x(u)),Object(h.jsxs)("div",Object(O.a)(Object(O.a)({className:Fe.a.constructor_item},void 0===n&&{ref:u,style:{opacity:j},"data-handler-id":f}),{},{children:[Object(h.jsx)("div",{style:{visibility:i?"hidden":"visible"},children:Object(h.jsx)(nt.DragIcon,{type:"primary"})}),Object(h.jsx)(k.ConstructorElement,{type:n,isLocked:i,text:d,price:t.price,thumbnail:t.image,handleClose:i?void 0:function(){s&&s(t)}})]}))},st=n(52),ct=n.n(st),it=function(e){var t=e.type,n=e.highlighted,r="".concat(ct.a.placeholder_item);"top"===t?r+=" ".concat(ct.a.placeholder_item_top):"bottom"===t&&(r+=" ".concat(ct.a.placeholder_item_bottom)),n&&(r+=" ".concat(ct.a.placeholder_item_highlighted));var a="top"===t||"bottom"===t?"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0438":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0430\u0447\u0438\u043d\u043a\u0443";return Object(h.jsx)("div",{className:r,children:Object(h.jsx)("span",{children:a})})},ot=n(122),dt=function(){var e=Ne((function(e){return e.burgerConstructor})),t=e.bun,n=e.ingredients,r=ye(),s=Object(rt.a)({accept:["bun","sauce","main"],canDrop:function(e){return void 0===e.index},drop:function(e){"bun"===e.type?r(X(e)):r(Z(Object(O.a)(Object(O.a)({},e),{},{key:Object(ot.v4)()})))},collect:function(e){return{isBunOver:e.isOver()&&"bun"===e.getItemType(),isIngredientOver:e.isOver()&&"bun"!==e.getItemType()}}}),c=Object(v.a)(s,2),i=c[0],o=i.isBunOver,d=i.isIngredientOver,u=c[1],l=function(e){r($(e))},m=Object(a.useCallback)((function(e,t){r(ee({fromIndex:e,toIndex:t}))}),[n]);return Object(h.jsxs)("div",{"data-test":"constructor_area",className:Fe.a.constructor_area,ref:u,children:[Object(h.jsx)("div",{"data-test":"top_bun",className:"pr-4",children:t?Object(h.jsx)(at,{type:"top",item:t}):Object(h.jsx)(it,{type:"top",highlighted:o})}),Object(h.jsx)("div",{className:Fe.a.ingredients,children:Object(h.jsx)("div",{"data-test":"constructor_ingredients",className:"".concat(Fe.a.scroll_area," custom-scroll"),children:n.length?n.map((function(e,t){return Object(h.jsx)(at,{item:e,index:t,onRemove:l,moveItem:m},e.key)})):Object(h.jsx)(it,{highlighted:d})})}),Object(h.jsx)("div",{"data-test":"bottom_bun",className:"pr-4",children:t?Object(h.jsx)(at,{type:"bottom",item:t}):Object(h.jsx)(it,{type:"bottom",highlighted:o})})]})},ut=function(){var e=Ne((function(e){return e.burgerConstructor})),t=e.bun,n=e.ingredients,r=Ne((function(e){return e.orderDetails})).isShown,s=Ne((function(e){return e.auth})).accessToken,c=Object(d.g)(),i=ye(),o=Object(a.useMemo)((function(){var e=n.reduce((function(e,t){return t.price+e}),0);return null!==t&&(e+=2*t.price),e}),[t,n]);return Object(h.jsxs)("div",{className:"".concat(Fe.a.burger_constructor," pt-25 pl-4 pr-4"),children:[Object(h.jsx)(dt,{}),Object(h.jsxs)("div",{className:Fe.a.info,children:[Object(h.jsxs)("p",{className:Fe.a.price,children:[o,Object(h.jsx)(We.CurrencyIcon,{type:"primary"})]}),Object(h.jsx)(k.Button,{"data-test":"create_order",type:"primary",onClick:function(){null!==t?s?i(ce()):c.push({pathname:"/login",state:{from:"/"}}):console.log("Unable to create order without buns")},size:"large",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]}),r&&Object(h.jsx)(Ye,{onClose:function(){i(ie())},children:Object(h.jsx)(tt,{})})]})},lt=n(123),mt=n(208),jt=function(){return Object(h.jsx)("div",{className:Te.a.home,children:Object(h.jsxs)(mt.a,{backend:lt.a,children:[Object(h.jsx)(ze,{}),Object(h.jsx)(ut,{})]})})},_t=n(41),bt=n.n(_t),pt=function(){var e=Ne((function(e){return e.auth})),t=e.accessToken,n=e.isLoggedIn,r=e.isPasswordWasReset,s=Object(d.h)().state,c=ye(),i=Object(a.useState)({email:"",password:""}),u=Object(v.a)(i,2),l=u[0],m=u[1],j=function(e){m(Object(O.a)(Object(O.a)({},l),{},Object(g.a)({},e.target.name,e.target.value)))};Object(a.useEffect)((function(){r&&c(J())}),[r]);var _,b=Object(a.useCallback)((function(e){e.preventDefault(),c(R(l))}),[l]);return n?Object(h.jsx)(d.a,{to:{pathname:(null===s||void 0===s||null===(_=s.from)||void 0===_?void 0:_.pathname)||"/"}}):t?Object(h.jsx)(d.a,{to:"/"}):Object(h.jsxs)("form",{className:bt.a.login,onSubmit:b,children:[Object(h.jsx)("span",{className:"text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(h.jsx)(k.EmailInput,{onChange:j,value:l.email,name:"email"}),Object(h.jsx)(k.PasswordInput,{onChange:j,value:l.password,name:"password"}),Object(h.jsx)(k.Button,{children:"\u0412\u043e\u0439\u0442\u0438"}),Object(h.jsxs)("div",{className:"".concat(bt.a.line," mt-9"),children:[Object(h.jsx)("span",{className:"text_type_main-default text_color_inactive mr-2",children:"\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(h.jsx)(o.b,{to:{pathname:"/register",state:s?{from:s.from}:{}},className:bt.a.link,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(h.jsxs)("div",{className:bt.a.line,children:[Object(h.jsx)("span",{className:"text_type_main-default text_color_inactive mr-2",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(h.jsx)(o.b,{to:{pathname:"/forgot-password",state:s?{from:s.from}:{}},className:bt.a.link,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},ft=n(94),ht=n.n(ft),xt=n.p+"static/media/404.b8926cac.png",gt=function(){return Object(h.jsxs)("div",{className:ht.a.not_found,children:[Object(h.jsx)("img",{alt:"404 Not Found",src:xt,height:"300px"}),Object(h.jsx)("span",{className:"text_type_main-default",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(h.jsx)(o.b,{className:ht.a.link,to:"/",children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})]})},Ot=n(35),vt=n.n(Ot),yt=n(53),Nt=n.n(yt),kt=n(32),wt=n.n(kt),Ct=n(42),Tt=n.n(Ct),St=function(e){var t=e.images.reverse(),n=t.length>5?6:t.length;return Object(h.jsx)("div",{className:Tt.a.illustrations,children:t.slice(0,n).map((function(e,r){return Object(h.jsxs)("div",{className:Tt.a.illustration,style:{left:"".concat(45*(n-r-1)-20,"px")},children:[Object(h.jsx)("div",{className:Tt.a.border}),Object(h.jsx)("img",{alt:"\u041d\u0435\u0442 \u0444\u043e\u0442\u043e",src:e,className:Tt.a.image}),0===r&&t.length>6&&Object(h.jsx)("div",{className:"".concat(Tt.a.number," text_type_main-default"),children:"+".concat(t.length-6)})]},r)}))})},Et=function(e){switch(e){case"done":return"\u0413\u043e\u0442\u043e\u0432";case"created":return"\u0421\u043e\u0437\u0434\u0430\u043d";case"pending":return"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f";default:return e}},It=function(e){var t=e.order,n=e.my,r=e.showInfo,a=Ne((function(e){return e.ingredients})).ingredientsMap,s=t.ingredients.map((function(e){var t=a.get(e);return t?t.image_mobile:""}));if(s.includes(""))return null;var c,i=t.ingredients.map((function(e){return a.get(e).price})).reduce((function(e,t){return e+t})),o="done"===t.status?wt.a.status_success:wt.a.status;return Object(h.jsxs)("div",{className:wt.a.card,onClick:function(){return r(t.number)},children:[Object(h.jsxs)("div",{className:wt.a.id_info,children:[Object(h.jsx)("span",{className:"text_type_digits-default",children:"#".concat(t.number)}),Object(h.jsx)("span",{className:"text_type_main-default text_color_inactive",children:(c=t.createdAt,new Date(c).toLocaleString("ru",{weekday:"long",year:"numeric",month:"long",day:"numeric",timeZoneName:"short",hour12:!1,hour:"2-digit",minute:"2-digit"}))})]}),Object(h.jsx)("span",{className:wt.a.name,children:t.name}),n&&Object(h.jsx)("p",{className:o,children:Et(t.status)}),Object(h.jsxs)("div",{className:wt.a.composition_and_price,children:[Object(h.jsx)(St,{images:s}),Object(h.jsxs)("p",{className:wt.a.price,children:[i,Object(h.jsx)(We.CurrencyIcon,{type:"primary"})]})]})]})},Lt=function(){var e=Ne((function(e){return e.orders})).orders,t=Object(d.g)(),n=Object(d.j)().url,r=ye(),s=Object(d.j)({path:"/profile/orders",strict:!0,sensitive:!0});Object(a.useEffect)((function(){if(s){var e=localStorage.getItem("accessToken").split(" ")[1];r(le("".concat("wss:/norma.nomoreparties.space/orders","?token=").concat(e)))}return function(){s&&r(me())}}),[]);var c=Object(a.useCallback)((function(e){t.push({pathname:"".concat(n,"/").concat(e),state:{modal:!0}})}),[]);if(!e)return Object(h.jsx)("div",{className:Nt.a.feed,children:Object(h.jsx)("p",{className:"text_type_main-default",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})});if(null===e.orders||void 0===e.orders||0===e.orders.length)return Object(h.jsx)("div",{className:Nt.a.feed,children:Object(h.jsx)("p",{className:"text_type_main-default",children:"\u0417\u0430\u043a\u0430\u0437\u043e\u0432 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442"})});return Object(h.jsx)("div",{className:Nt.a.feed,children:Object(h.jsx)("ul",{className:"".concat(Nt.a.list," custom-scroll"),children:e.orders.map((function(e){return function(e){return void 0!==e&&null!=e&&Object.keys(e).length>0&&null!==e.ingredients&&void 0!==e.ingredients&&e.ingredients.length>0}(e)?Object(h.jsx)("li",{children:Object(h.jsx)(It,{order:e,my:null!==s,showInfo:c})},e.number):""}))})})},Rt=n(29),Pt=n.n(Rt),Dt=function(e){var t=e.numbers,n=e.isDone,r=Math.floor(t.length/10)+1,a=Array.from(Array(r).keys()),s=t.reduce((function(e,t,n){var r=Math.floor(n/10);return e[r]=[].concat(e[r]||[],"".concat(t)),e}),[]);return Object(h.jsxs)("div",{className:Pt.a.status,children:[Object(h.jsx)("span",{className:"text_type_main-medium pb-6",children:n?"\u0413\u043e\u0442\u043e\u0432\u044b:":"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(h.jsx)("div",{className:n?Pt.a.columns_success:Pt.a.columns,children:t.length>0&&a.map((function(e){var t;return Object(h.jsx)("div",{className:Pt.a.column,children:null===(t=s[e])||void 0===t?void 0:t.map((function(e){return Object(h.jsx)("span",{className:"text_type_digits-default",children:e},e)}))},e)}))})]})},Bt=function(e){var t=e.orders,n=t.orders.filter((function(e){return"done"===e.status})).map((function(e){return e.number})),r=t.orders.filter((function(e){return"done"!==e.status})).map((function(e){return e.number}));return Object(h.jsxs)("div",{className:Pt.a.orders_summary,children:[Object(h.jsxs)("div",{className:Pt.a.statuses,children:[Object(h.jsx)(Dt,{numbers:n,isDone:!0}),Object(h.jsx)(Dt,{numbers:r,isDone:!1})]}),Object(h.jsxs)("div",{className:Pt.a.count,children:[Object(h.jsx)("span",{className:"text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(h.jsx)("span",{className:"text_type_digits-large",children:t.total})]}),Object(h.jsxs)("div",{className:Pt.a.count,children:[Object(h.jsx)("span",{className:"text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(h.jsx)("span",{className:"text_type_digits-large",children:t.totalToday})]})]})},Wt=function(){var e=ye(),t=Ne((function(e){return e.orders})).orders;return Object(a.useEffect)((function(){return e(le("wss:/norma.nomoreparties.space/orders/all")),function(){e(me())}}),[]),null===t?Object(h.jsx)("div",{className:vt.a.order_feed,children:Object(h.jsx)("p",{className:"text_type_main-default",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})}):null===t.orders||void 0===t.orders||0===t.orders.length?Object(h.jsx)("div",{className:vt.a.order_feed,children:Object(h.jsx)("p",{className:"text_type_main-default",children:"\u0417\u0430\u043a\u0430\u0437\u043e\u0432 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442"})}):Object(h.jsxs)("div",{className:vt.a.order_feed,children:[Object(h.jsxs)("div",{className:vt.a.orders,children:[Object(h.jsx)("p",{className:vt.a.title,children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(h.jsx)(Lt,{})]}),Object(h.jsx)("div",{className:vt.a.summary,children:Object(h.jsx)(Bt,{orders:t})})]})},Mt=n(28),At=n.n(Mt),Vt=n(63),zt=n.n(Vt),Jt=function(){var e=Ne((function(e){return e.auth})).user,t=Object(a.useState)({name:e?e.name:"",email:e?e.email:"",password:""}),n=Object(v.a)(t,2),r=n[0],s=n[1],c=Object(d.j)().url,i=Object(d.g)(),o=ye(),u=function(e){s(Object(O.a)(Object(O.a)({},r),{},Object(g.a)({},e.target.name,e.target.value)))};return Object(a.useEffect)((function(){o(W())}),[null===e||void 0===e?void 0:e.name,null===e||void 0===e?void 0:e.email]),Object(a.useEffect)((function(){e&&s(Object(O.a)(Object(O.a)({},r),{},{name:e.name,email:e.email}))}),[null===e||void 0===e?void 0:e.name,null===e||void 0===e?void 0:e.email]),Object(h.jsxs)("form",{className:zt.a.profile,onSubmit:function(e){e.preventDefault(),o(M(r)),s(Object(O.a)(Object(O.a)({},r),{},{password:""}))},children:[Object(h.jsx)(k.Input,{type:"text",onChange:u,value:r.name,placeholder:"\u0418\u043c\u044f",name:"name"}),Object(h.jsx)(k.EmailInput,{onChange:u,value:r.email,name:"email"}),Object(h.jsx)(k.PasswordInput,{onChange:u,value:r.password||"",name:"password"}),Object(h.jsxs)("div",{className:zt.a.actions,children:[Object(h.jsx)("span",{className:zt.a.link,onClick:function(){i.push("/"),setTimeout((function(){return i.push("".concat(c))}),10)},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(h.jsx)(k.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},Ft=function(e){var t=e.children,n=Object(xe.a)(e,["children"]),r=Ne((function(e){return e.auth})).accessToken;return Object(h.jsx)(d.b,Object(O.a)(Object(O.a)({},n),{},{render:function(e){var n=e.location;return r?t:Object(h.jsx)(d.a,{to:{pathname:"/login",state:{from:n}}})}}))},Gt=function(){var e=Object(d.j)().url,t=ye();return Ne((function(e){return e.auth})).isLoggedOut?Object(h.jsx)(d.a,{to:"/login"}):Object(h.jsxs)("div",{className:At.a.profile,children:[Object(h.jsxs)("div",{className:At.a.left,children:[Object(h.jsxs)("ul",{className:At.a.menu,children:[Object(h.jsx)(o.c,{to:e,exact:!0,className:At.a.menu_item,activeClassName:At.a.active_menu_item,children:Object(h.jsx)("span",{children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(h.jsx)(o.c,{to:"".concat(e,"/orders"),exact:!0,className:At.a.menu_item,activeClassName:At.a.active_menu_item,children:Object(h.jsx)("span",{children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(h.jsx)("div",{className:At.a.menu_item,style:{cursor:"pointer"},onClick:function(){t(A())},children:Object(h.jsx)("span",{children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(h.jsx)("p",{className:"text_type_main-default text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(h.jsx)("div",{className:At.a.right,children:Object(h.jsxs)(d.d,{children:[Object(h.jsx)(Ft,{path:e,exact:!0,children:Object(h.jsx)(Jt,{})}),Object(h.jsx)(Ft,{path:"".concat(e,"/orders"),exact:!0,children:Object(h.jsx)("div",{style:{width:"100%",height:"100%",paddingTop:"20px"},children:Object(h.jsx)(Lt,{})})})]})})]})},Ut=n(64),Ht=n.n(Ut),Qt=function(){var e,t=Ne((function(e){return e.auth})).accessToken,n=ye(),r=Object(d.h)().state,s=Object(a.useState)({email:"",password:"",name:""}),c=Object(v.a)(s,2),i=c[0],u=c[1],l=function(e){u(Object(O.a)(Object(O.a)({},i),{},Object(g.a)({},e.target.name,e.target.value)))},m=Object(a.useCallback)((function(e){e.preventDefault(),n(P(i))}),[i]);return t?Object(h.jsx)(d.a,{to:{pathname:(null===r||void 0===r||null===(e=r.from)||void 0===e?void 0:e.pathname)||"/"}}):Object(h.jsxs)("form",{className:Ht.a.registration,onSubmit:m,children:[Object(h.jsx)("span",{className:"text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(h.jsx)(k.Input,{type:"text",onChange:l,value:i.name,placeholder:"\u0418\u043c\u044f",name:"name"}),Object(h.jsx)(k.EmailInput,{onChange:l,value:i.email,name:"email"}),Object(h.jsx)(k.PasswordInput,{onChange:l,value:i.password||"",name:"password"}),Object(h.jsx)(k.Button,{children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(h.jsxs)("div",{className:"".concat(Ht.a.line," mt-9"),children:[Object(h.jsx)("span",{className:"text_type_main-default text_color_inactive mr-2",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(h.jsx)(o.b,{to:{pathname:"/login",state:r?{from:r.from}:{}},className:Ht.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},qt=n(65),Kt=n.n(qt),Yt=function(){var e=Ne((function(e){return e.auth})),t=e.accessToken,n=e.isResetPassword,r=e.isPasswordWasReset,s=ye(),c=Object(d.h)().state,i=Object(a.useState)({token:"",password:""}),u=Object(v.a)(i,2),l=u[0],m=u[1],j=function(e){m(Object(O.a)(Object(O.a)({},l),{},Object(g.a)({},e.target.name,e.target.value)))},_=Object(a.useCallback)((function(e){e.preventDefault(),s(B(l))}),[l]);return r?Object(h.jsx)(d.a,{to:{pathname:"/login",state:c?{from:c.from}:{}}}):t||!n?Object(h.jsx)(d.a,{to:"/"}):Object(h.jsxs)("form",{className:Kt.a.reset_password,onSubmit:_,children:[Object(h.jsx)("span",{className:"text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(h.jsx)(k.PasswordInput,{onChange:j,value:l.password,name:"password"}),Object(h.jsx)(k.Input,{type:"text",onChange:j,value:l.token,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",name:"token"}),Object(h.jsx)(k.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(h.jsxs)("div",{className:"".concat(Kt.a.line," mt-9"),children:[Object(h.jsx)("span",{className:"text_type_main-default text_color_inactive mr-2",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(h.jsx)(o.b,{to:{pathname:"/login",state:c?{from:c.from}:{}},className:Kt.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Xt=n(33),Zt=n.n(Xt),$t=function(){var e=Object(d.h)(),t=(e.state?e.state:{modal:void 0}).modal,n=Object(d.g)(),r=Object(d.i)().id,a=Ne((function(e){return e.ingredients})).ingredients.find((function(e){return e._id===r})),s=a?Object(h.jsxs)("div",{className:Zt.a.ingredient_details,children:[(!t||"PUSH"!==n.action)&&Object(h.jsx)("p",{className:"text_type_main-large mt-30",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(h.jsx)("img",{alt:"\u041d\u0435\u0442 \u0444\u043e\u0442\u043e",src:a.image,className:"".concat(Zt.a.illustration," mb-4")}),Object(h.jsx)("p",{"data-test":"ingredient_name",className:"text_type_main-medium mb-8",children:a.name}),Object(h.jsxs)("div",{className:Zt.a.data,children:[Object(h.jsxs)("div",{className:Zt.a.data_item,children:[Object(h.jsx)("p",{className:"text text_type_main-default mb-2",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(h.jsx)("p",{className:"text text_type_digits-default",children:a.calories})]}),Object(h.jsxs)("div",{className:Zt.a.data_item,children:[Object(h.jsx)("p",{className:"text text_type_main-default mb-2",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(h.jsx)("p",{className:"text text_type_digits-default",children:a.proteins})]}),Object(h.jsxs)("div",{className:Zt.a.data_item,children:[Object(h.jsx)("p",{className:"text text_type_main-default mb-2",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(h.jsx)("p",{className:"text text_type_digits-default",children:a.fat})]}),Object(h.jsxs)("div",{className:Zt.a.data_item,children:[Object(h.jsx)("p",{className:"text text_type_main-default mb-2",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(h.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:a.carbohydrates})]})]})]}):"\u041d\u0435\u0442 \u0442\u0430\u043a\u043e\u0433\u043e \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430";return Object(h.jsx)(h.Fragment,{children:t&&"PUSH"===n.action?Object(h.jsx)(Ye,{onClose:function(){return n.goBack()},title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:s}):s})},en=n(17),tn=n.n(en),nn=n(30),rn=n.n(nn);var an=function(e){var t=e.ingredient,n=e.count;return Object(h.jsxs)("div",{className:rn.a.ingredient,children:[Object(h.jsxs)("div",{className:rn.a.illustration,children:[Object(h.jsx)("div",{className:rn.a.border}),Object(h.jsx)("img",{alt:"\u041d\u0435\u0442 \u0444\u043e\u0442\u043e",src:t.image_mobile,className:rn.a.image})]}),Object(h.jsx)("p",{className:rn.a.title,children:t.name}),Object(h.jsxs)("p",{className:rn.a.price,children:["".concat(n," x ").concat(t.price),Object(h.jsx)(We.CurrencyIcon,{type:"primary"})]})]})},sn=function(e){var t=e.ingredients,n=Ne((function(e){return e.ingredients})).ingredientsMap,r=Array.from(new Set(t));return Object(h.jsx)("div",{className:rn.a.ingredients,children:Object(h.jsx)("ul",{className:"".concat(rn.a.list," custom-scroll"),children:r.map((function(e){var r,a,s=n.get(e);return Object(h.jsx)("li",{children:Object(h.jsx)(an,{ingredient:s,count:(r=t,a=e,r.reduce((function(e,t){return t===a?e+1:e}),0))})},s._id)}))})})},cn=function(){var e=Object(d.h)(),t=(e.state?e.state:{modal:void 0}).modal,n=Object(d.g)(),r=Object(d.i)().id,s=Ne((function(e){return e.orders})).orders,c=Ne((function(e){return e.ingredients})).ingredientsMap,i=ye();if(Object(a.useEffect)((function(){s||i(fe(r))}),[s]),null===s)return Object(h.jsx)("div",{className:tn.a.order_info,children:Object(h.jsx)("p",{className:"text_type_main-default",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})});var o=s.orders.find((function(e){return e.number.toString()===r})),u=o.ingredients.map((function(e){return c.get(e).price})).reduce((function(e,t){return e+t})),l="done"===o.status?tn.a.status_success:tn.a.status,m=Object(h.jsxs)("div",{className:tn.a.order_info,children:[Object(h.jsx)("p",{className:tn.a.title,children:o.name}),Object(h.jsx)("p",{className:l,children:Et(o.status)}),Object(h.jsx)("p",{className:tn.a.ingredients_title,children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(h.jsx)("div",{className:tn.a.ingredients,children:Object(h.jsx)(sn,{ingredients:o.ingredients})}),Object(h.jsxs)("div",{className:tn.a.footer,children:[Object(h.jsx)("span",{className:"text_type_main-default text_color_inactive",children:o.createdAt}),Object(h.jsxs)("p",{className:tn.a.price,children:[u,Object(h.jsx)(We.CurrencyIcon,{type:"primary"})]})]})]});return Object(h.jsx)(h.Fragment,{children:t&&"PUSH"===n.action?Object(h.jsx)(Ye,{onClose:function(){return n.goBack()},title:"#".concat(o.number),children:Object(h.jsx)("div",{className:tn.a.order_info,children:m})}):Object(h.jsx)("div",{className:tn.a.order_info,children:Object(h.jsxs)("div",{className:tn.a.container,children:[Object(h.jsx)("p",{className:tn.a.number,children:"#".concat(o.number)}),m]})})})},on=function(){var e=Ne((function(e){return e.ingredients})),t=e.ingredients,n=e.isLoading,r=e.hasError,s=ye();return Object(a.useEffect)((function(){s(G())}),[]),Object(h.jsx)(o.a,{children:Object(h.jsxs)("div",{className:l.a.app,children:[Object(h.jsx)(x,{}),Object(h.jsxs)("main",{className:l.a.main,children:[n&&Object(h.jsx)("p",{className:"text text_type_main-medium",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),r&&Object(h.jsx)("p",{className:"text text_type_main-medium",children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"}),!n&&!r&&t.length&&Object(h.jsxs)(d.d,{children:[Object(h.jsx)(d.b,{path:"/react-burger",exact:!0,children:Object(h.jsx)(jt,{})}),Object(h.jsx)(d.b,{path:"/react-burger/login",exact:!0,children:Object(h.jsx)(pt,{})}),Object(h.jsx)(d.b,{path:"/react-burger/register",exact:!0,children:Object(h.jsx)(Qt,{})}),Object(h.jsx)(d.b,{path:"/react-burger/forgot-password",exact:!0,children:Object(h.jsx)(we,{})}),Object(h.jsx)(d.b,{path:"/react-burger/reset-password",exact:!0,children:Object(h.jsx)(Yt,{})}),Object(h.jsx)(Ft,{path:"/react-burger/profile/orders/:id",exact:!0,children:Object(h.jsx)(cn,{})}),Object(h.jsx)(Ft,{path:"/react-burger/profile",children:Object(h.jsx)(Gt,{})}),Object(h.jsx)(d.b,{path:"/react-burger/feed",exact:!0,children:Object(h.jsx)(Wt,{})}),Object(h.jsx)(d.b,{path:"/react-burger/feed/:id",exact:!0,children:Object(h.jsx)(cn,{})}),Object(h.jsx)(d.b,{path:"/react-burger/ingredients/:id",exact:!0,children:Object(h.jsx)($t,{})}),Object(h.jsx)(d.b,{children:Object(h.jsx)(gt,{})})]})]})]})})},dn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,211)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))},un=n(11);Object(un.d)(),i.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(ue.a,{store:ke,children:Object(h.jsx)(on,{})})}),document.getElementById("root")),dn()},25:function(e,t,n){e.exports={header:"app-header_header__3MGNV",header_content:"app-header_header_content__3RD-e",left_menu:"app-header_left_menu__1IKcz",menu_item:"app-header_menu_item__1IBCh text_type_main-default pt-4 pb-4 pl-5 pr-5",active_menu_item:"app-header_active_menu_item__3ApvA app-header_menu_item__1IBCh text_type_main-default pt-4 pb-4 pl-5 pr-5",right_menu:"app-header_right_menu__3LqE6",logo:"app-header_logo__1A_2E"}},27:function(e,t,n){e.exports={burger_constructor:"burger-constructor_burger_constructor__hdjTc",constructor_area:"burger-constructor_constructor_area__31B1X",ingredients:"burger-constructor_ingredients__1Bhok",scroll_area:"burger-constructor_scroll_area__1AZie",constructor_item:"burger-constructor_constructor_item__2DgoO",price:"burger-constructor_price__2jlsf",info:"burger-constructor_info__3Cosy"}},28:function(e,t,n){e.exports={profile:"profile_profile__30CXn",left:"profile_left__2mVI8 pt-30",menu:"profile_menu__3DIyi",menu_item:"profile_menu_item__1qhSv text_type_main-medium",active_menu_item:"profile_active_menu_item__3QY2g profile_menu_item__1qhSv text_type_main-medium",right:"profile_right__Ehlsq"}},29:function(e,t,n){e.exports={orders_summary:"order-summary_orders_summary__2nqfK",statuses:"order-summary_statuses__11efx",status:"order-summary_status__16KQC",columns:"order-summary_columns__1kUwP",columns_success:"order-summary_columns_success__3mwHY order-summary_columns__1kUwP",column:"order-summary_column__3V_Y-",count:"order-summary_count__2Ahbl"}},30:function(e,t,n){e.exports={ingredients:"ingredients_ingredients__2xfxG",list:"ingredients_list__3Azx-",ingredient:"ingredients_ingredient__O0qj7",illustration:"ingredients_illustration__160Wv",image:"ingredients_image__GEixL",border:"ingredients_border__rgoFe",title:"ingredients_title__L2tVi text_type_main-default",price:"ingredients_price__VbwgV"}},32:function(e,t,n){e.exports={card:"order-card_card__30cS_",id_info:"order-card_id_info__1akOU",price:"order-card_price__5wJze",composition_and_price:"order-card_composition_and_price__3CP3T",name:"order-card_name__2HSgf text_type_main-medium",status:"order-card_status__2xHjo text text_type_main-default",status_success:"order-card_status_success__2QBY1 order-card_status__2xHjo text text_type_main-default"}},33:function(e,t,n){e.exports={ingredient_details:"ingredient-details_ingredient_details__D--uQ",illustration:"ingredient-details_illustration__3mOWf",data_item:"ingredient-details_data_item__1QYKY",data:"ingredient-details_data__oHZ3o"}},35:function(e,t,n){e.exports={order_feed:"order-feed_order_feed__2dwUG",orders:"order-feed_orders__1SeX1",title:"order-feed_title__3fnrk text text_type_main-large",summary:"order-feed_summary__2_S41"}},39:function(e,t,n){e.exports={burger_ingredients:"burger-ingredients_burger_ingredients__3N4_i",title:"burger-ingredients_title__vd_ok text text_type_main-large",tabs:"burger-ingredients_tabs__2ydTy mb-10 mt-5",ingredients:"burger-ingredients_ingredients__1OWIS",group_list:"burger-ingredients_group_list__2hG-a"}},40:function(e,t,n){e.exports={ingredient_item:"ingredient-item_ingredient_item__3G_6L",counter:"ingredient-item_counter__3P0Kt",content:"ingredient-item_content__tcX-4",price:"ingredient-item_price__W8Bfq",illustration:"ingredient-item_illustration__tBIGp",ingredient_item_text:"ingredient-item_ingredient_item_text__3B3et"}},41:function(e,t,n){e.exports={login:"login_login__1HTAh",id_info:"login_id_info__204zo",link:"login_link__14fzB text_type_main-default text_color_accent"}},42:function(e,t,n){e.exports={illustrations:"ingredients-illustrations_illustrations__3fEju",illustration:"ingredients-illustrations_illustration__frJpm",image:"ingredients-illustrations_image__P5Ebs",border:"ingredients-illustrations_border__2k5Lu",number:"ingredients-illustrations_number__25aiA text_type_main-default"}},52:function(e,t,n){e.exports={placeholder_item:"placeholder-item_placeholder_item__2TQ6j",placeholder_item_highlighted:"placeholder-item_placeholder_item_highlighted__1rOzT",placeholder_item_top:"placeholder-item_placeholder_item_top__2uVpy",placeholder_item_bottom:"placeholder-item_placeholder_item_bottom__16uc5"}},53:function(e,t,n){e.exports={feed:"orders_feed__29_K_",list:"orders_list__3sXIg"}},61:function(e,t,n){e.exports={forgot_password:"forgot-password_forgot_password__1xzal",id_info:"forgot-password_id_info__1bUCv",link:"forgot-password_link__13SQi text_type_main-default text_color_accent"}},62:function(e,t,n){e.exports={modal:"modal_modal__XFWYD",header:"modal_header__2j-Ms",header_with_title:"modal_header_with_title__303sE modal_header__2j-Ms",header_without_title:"modal_header_without_title__3Qc3w modal_header__2j-Ms"}},63:function(e,t,n){e.exports={profile:"profile_profile__3EXZO pt-30",link:"profile_link__26IAv text_type_main-default text_color_accent",actions:"profile_actions__1u4_E"}},64:function(e,t,n){e.exports={registration:"registration_registration__1PrwB",id_info:"registration_id_info__8Nj8x",link:"registration_link__3rzSN text_type_main-default text_color_accent"}},65:function(e,t,n){e.exports={reset_password:"reset-password_reset_password__1q-Ga",id_info:"reset-password_id_info__3u6xs",link:"reset-password_link__3yoj1 text_type_main-default text_color_accent"}},89:function(e,t,n){e.exports={app:"app_app__F4a47",main:"app_main__24uKo"}},92:function(e,t,n){e.exports={order_details:"order-details_order_details__2mnUh",image:"order-details_image__3ApCS"}},94:function(e,t,n){e.exports={not_found:"not-found_not_found__1iGiA",link:"not-found_link__3acEQ text_type_main-default text_color_accent"}}},[[203,1,2]]]);
//# sourceMappingURL=main.61347543.chunk.js.map